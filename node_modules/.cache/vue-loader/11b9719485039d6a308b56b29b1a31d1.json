{"remainingRequest":"C:\\Users\\84715\\Desktop\\q\\background-template\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\84715\\Desktop\\q\\background-template\\src\\views\\login.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\84715\\Desktop\\q\\background-template\\src\\views\\login.vue","mtime":1608535402191},{"path":"C:\\Users\\84715\\Desktop\\q\\background-template\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\84715\\Desktop\\q\\background-template\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\84715\\Desktop\\q\\background-template\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\84715\\Desktop\\q\\background-template\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBhcGlzIGZyb20gIkAvYXBpcy9hcGlzIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJsb2dpbiIsCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGZvcm1Mb2dpbjogewogICAgICAgIC8v6KGo5Y2V5a+56LGhCiAgICAgICAgbG9naW5OYW1lOiAiYWRtaW4iLAogICAgICAgIHBhc3N3b3JkOiAiMTIzNDU2IiwKICAgICAgfSwKICAgICAgZXJyb3JJbmZvOiB7CiAgICAgICAgdGV4dDogIueZu+mZhuWksei0pSzor7fph43or5UiLAogICAgICAgIGlzU2hvd0Vycm9yOiBmYWxzZSwgLy/mmL7npLrplJnor6/mj5DnpLoKICAgICAgfSwKICAgIH07CiAgfSwKICBtb3VudGVkKCkgewogICAgLy8g5Zue6L2m54K55Ye75Zue6LCDCiAgICBkb2N1bWVudC5vbmtleWRvd24gPSAoZXZlbnQpID0+IHsKICAgICAgY29uc3QgZSA9IGV2ZW50IHx8IHdpbmRvdy5ldmVudCB8fCBhcmd1bWVudHMuY2FsbGVlLmNhbGxlci5hcmd1bWVudHNbMF07CiAgICAgIGlmIChlICYmIGUua2V5Q29kZSA9PSAxMyAmJiB0aGlzLiRyb3V0ZS5wYXRoID09ICIvbG9naW4iKSB7CiAgICAgICAgLy8gZW50ZXIg6ZSuCiAgICAgICAgdGhpcy5sb2dpbigpOwogICAgICB9CiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgLy/osIPnlKjlkI7nq6/nmbvpmYbmjqXlj6MKICAgIGFzeW5jIGxvZ2luKCkgewogICAgICB0cnkgewogICAgICAgIGxldCByZXMgPSBhd2FpdCBhcGlzLnNoaXJvQXBpLmxvZ2luSW4odGhpcy5mb3JtTG9naW4pOwogICAgICAgIHJlcyA9IHJlcy5kYXRhOwogICAgICAgIGNvbnNvbGUubG9nKCJzdWNjZXNzOueZu+mZhuaIkOWKnyIsIHJlcyk7CiAgICAgICAgaWYgKHJlcy5jb2RlID09IDApIHsKICAgICAgICAgIC8vIOWtmOWFpSB0b2tlbgogICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgidG9rZW4iLCByZXMuZGF0YS50b2tlbkhlYWQgKyByZXMuZGF0YS50b2tlbik7CiAgICAgICAgICAvLyDojrflj5boj5zljZXnrYkKICAgICAgICAgIGxldCBtZW51ID0gYXdhaXQgYXBpcy5zaGlyb0FwaS5sb2dpbk1lbnUoKTsKICAgICAgICAgIGNvbnNvbGUubG9nKCJtZW51OuaIkOWKnyIsIG1lbnUpOwogICAgICAgICAgaWYgKG1lbnUuZGF0YS5jb2RlID09IDApIHsKICAgICAgICAgICAgbGV0IGpzb24gPSBtZW51LmRhdGEuZGF0YTsKICAgICAgICAgICAgY29uc29sZS5sb2coanNvbik7CiAgICAgICAgICAgIHRoaXMuJHJvdXRlci5yZXBsYWNlKHsgcGF0aDogIi9pbmRleCIgfSk7CiAgICAgICAgICAgIC8vIOWtmOWFpeiPnOWNlSzmuLLmn5Poj5zljZUKICAgICAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goImFkZF9NZW51cyIsIGpzb24pOwogICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgKICAgICAgICAgICAgICAidXNlcm5hbWUiLAogICAgICAgICAgICAgIHRoaXMuZm9ybUxvZ2luLmxvZ2luTmFtZQogICAgICAgICAgICApOwogICAgICAgICAgICAvLyAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgibGV2IiwganNvbi5zeXNSb2xlVm9MaXN0KTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIGNvbnNvbGUubG9nKCJlcnJvcjrlpLHotKUiLCBlcnIpOwogICAgICAgIHRoaXMuZXJyb3JJbmZvLmlzU2hvd0Vycm9yID0gdHJ1ZTsKICAgICAgICB0aGlzLmVycm9ySW5mby50ZXh0ID0gIuezu+e7n+aOpeWPo+W8guW4uCI7CiAgICAgIH0KICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["login.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;AA2BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"login.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"login_wrapper\">\n    <div class=\"login\">\n      <el-form :model=\"formLogin\">\n        <el-form-item>\n          <h2 class=\"title\">后台管理系统</h2>\n        </el-form-item>\n        <el-form-item>\n          <el-input v-model=\"formLogin.loginName\" placeholder=\"账号\"></el-input>\n        </el-form-item>\n        <el-form-item>\n          <el-input v-model=\"formLogin.password\" placeholder=\"密码\"></el-input>\n        </el-form-item>\n        <el-form-item>\n          <el-button type=\"primary\" @click=\"login\">登陆</el-button>\n          <span v-show=\"this.errorInfo.isShowError\" class=\"error\">\n            {{ this.errorInfo.text }}\n          </span>\n        </el-form-item>\n      </el-form>\n    </div>\n    <!-- <p class=\"bei\">京ICP备18050367号-1</p>\n    <p class=\"recover\" @click=\"rollBackTables\">如果登陆数据异常,点此恢复数据</p> -->\n  </div>\n</template>\n\n<script>\nimport apis from \"@/apis/apis\";\nexport default {\n  name: \"login\",\n  data() {\n    return {\n      formLogin: {\n        //表单对象\n        loginName: \"admin\",\n        password: \"123456\",\n      },\n      errorInfo: {\n        text: \"登陆失败,请重试\",\n        isShowError: false, //显示错误提示\n      },\n    };\n  },\n  mounted() {\n    // 回车点击回调\n    document.onkeydown = (event) => {\n      const e = event || window.event || arguments.callee.caller.arguments[0];\n      if (e && e.keyCode == 13 && this.$route.path == \"/login\") {\n        // enter 键\n        this.login();\n      }\n    };\n  },\n  methods: {\n    //调用后端登陆接口\n    async login() {\n      try {\n        let res = await apis.shiroApi.loginIn(this.formLogin);\n        res = res.data;\n        console.log(\"success:登陆成功\", res);\n        if (res.code == 0) {\n          // 存入 token\n          sessionStorage.setItem(\"token\", res.data.tokenHead + res.data.token);\n          // 获取菜单等\n          let menu = await apis.shiroApi.loginMenu();\n          console.log(\"menu:成功\", menu);\n          if (menu.data.code == 0) {\n            let json = menu.data.data;\n            console.log(json);\n            this.$router.replace({ path: \"/index\" });\n            // 存入菜单,渲染菜单\n            this.$store.dispatch(\"add_Menus\", json);\n             sessionStorage.setItem(\n              \"username\",\n              this.formLogin.loginName\n            );\n            //  sessionStorage.setItem(\"lev\", json.sysRoleVoList);\n          }\n        }\n      } catch (err) {\n        console.log(\"error:失败\", err);\n        this.errorInfo.isShowError = true;\n        this.errorInfo.text = \"系统接口异常\";\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"scss\">\n$input_width: 300px;\n\n.login_wrapper {\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background-image: url(\"~@/static/img/loginbg.png\");\n  background-repeat: no-repeat;\n  background-size: 100% 100%;\n  .login {\n    position: absolute;\n    right: 15%;\n    top: 30%;\n    width: 460px;\n    height: 40%;\n    // margin-top: -150px;\n    border: 1px solid #eaeaea;\n    box-shadow: 0 0 25px #cac6c6;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    .title {\n      text-align: center;\n      color: #ffffff;\n    }\n    .el-form-item__content {\n      width: $input_width;\n    }\n    .el-button {\n      width: $input_width;\n    }\n    .el-form {\n      // margin: 30px 80px auto 80px;\n      .error {\n        display: block;\n        text-align: center;\n        color: red;\n      }\n    }\n  }\n}\n.recover {\n  position: absolute;\n  bottom: 0px;\n  cursor: pointer;\n  color: #e6a23c;\n  // display: none;\n}\n.bei {\n  position: absolute;\n  bottom: 20px;\n  cursor: pointer;\n  color: #505458;\n}\n</style>\n"]}]}