{"remainingRequest":"C:\\Users\\84715\\Desktop\\q\\background-template\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\84715\\Desktop\\q\\background-template\\src\\views\\systemManagement\\roleManagement.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\84715\\Desktop\\q\\background-template\\src\\views\\systemManagement\\roleManagement.vue","mtime":1608456415330},{"path":"C:\\Users\\84715\\Desktop\\q\\background-template\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\84715\\Desktop\\q\\background-template\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\84715\\Desktop\\q\\background-template\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\84715\\Desktop\\q\\background-template\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgYXBpcyBmcm9tICJAL2FwaXMvYXBpcyI7DQpleHBvcnQgZGVmYXVsdCB7DQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIHRhYmxlRGF0YTogW10sIC8vIOihqOagvOWGheWuuQ0KICAgICAgdGFibGVEYXRhUm93OiB7fSwgLy8g6KGo5qC855qE5p+Q5p2h5YaF5a65DQogICAgICBmb3JtU2VlVmlzaWJsZTogZmFsc2UsIC8vIOafpeeci+inkuiJsuW8ueWHuuahhueahOW4g+WwlOWAvA0KICAgICAgbGFiZWxQb3NpdGlvbjogInJpZ2h0IiwgLy9sYWJsZeWvuem9kOaWueW8jw0KICAgICAgbGFiZWxXaWR0aDogIjgwcHgiLCAvL2xhYmxl5a695bqmDQogICAgICBmb3JtTW9kaWZ5VmlzaWJsZTogZmFsc2UsIC8vIOe8lui+keinkuiJsuW8ueWHuuahhueahOW4g+WwlOWAvA0KICAgICAgZm9ybUFkZERhdGE6IHsNCiAgICAgICAgcm9sZU5hbWU6ICIiLA0KICAgICAgICByb2xlQ29kZTogIiIsDQogICAgICAgIHJvbGVEZXNjOiAiIiwNCiAgICAgICAgZHNUeXBlOiAiIiwNCiAgICAgICAgY3JlYXRlVGltZTogIiIsDQogICAgICB9LCAvLyDmlrDlop7lhoXlrrkNCiAgICAgIGZvcm1BZGRWaXNpYmxlOiBmYWxzZSwgLy8g5paw5aKe6KeS6Imy5by55Ye65qGG55qE5biD5bCU5YC8DQogICAgICBmb3JtTWVudVZpc2libGU6IGZhbHNlLCAvLyDmnYPpmZDlvLnlh7rmoYbnmoTluIPlsJTlgLwNCiAgICAgIGZvcm1NZW51RGF0YTogW10sIC8vIOadg+mZkOeahOagkeW9ouaVsOaNrg0KICAgICAgZm9ybU1lbnVEYXRhY2hlY2tib3g6IFtdLCAvLyDmnYPpmZDnmoTmoJHlvaLmlbDmja7pu5jorqTpgInkuK3nmoToioLngrnmlbDnu4QNCiAgICAgIC8vIOadg+mZkOmFjee9rumAiemhuQ0KICAgICAgZGVmYXVsdFByb3BzOiB7DQogICAgICAgIGNoaWxkcmVuOiAiY2hpbGRyZW4iLCAvL+aMh+WumuiKgueCueagh+etvuS4uuiKgueCueWvueixoeeahOafkOS4quWxnuaAp+WAvA0KICAgICAgICBsYWJlbDogImxhYmVsIiwgLy/mjIflrprlrZDmoJHkuLroioLngrnlr7nosaHnmoTmn5DkuKrlsZ7mgKflgLwNCiAgICAgIH0sDQogICAgfTsNCiAgfSwNCiAgLy8g5Yid5aeL5YyW6KGo5qC85Y+C5pWwDQogIG1vdW50ZWQoKSB7DQogICAgdGhpcy5mb3JtR2V0Q2xpY2soKTsNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIC8vIOiOt+WPluaJgOacieinkuiJsuaVsOaNrg0KICAgIGFzeW5jIGZvcm1HZXRDbGljaygpIHsNCiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGFwaXMuYWRtaW5BcGkuZ2V0VXBtc1JvbGVQYWdlKCk7DQogICAgICBjb25zb2xlLmxvZyhyZXMpOw0KICAgICAgdGhpcy50YWJsZURhdGEgPSByZXMuZGF0YS5kYXRhLnJlY29yZHM7DQogICAgICBjb25zb2xlLmxvZyh0aGlzLnRhYmxlRGF0YSk7DQogICAgfSwNCiAgICAvLyDliLfmlrDmjInpkq4NCiAgICByZWZyZXNoKCkgew0KICAgICAgdGhpcy50YWJsZURhdGEgPSBbXTsNCiAgICAgIHRoaXMuZm9ybUdldENsaWNrKCk7DQogICAgfSwNCiAgICAvLyDngrnlh7vmn6XnnIvmn5DmnaHop5LoibINCiAgICBmb3JtU2VlQ2xpY2socm93KSB7DQogICAgICBjb25zb2xlLmxvZyhyb3cpOw0KICAgICAgdGhpcy50YWJsZURhdGFSb3cgPSByb3c7DQogICAgICB0aGlzLmZvcm1TZWVWaXNpYmxlID0gdHJ1ZTsNCiAgICB9LA0KICAgIC8vIOeCueWHu+aWsOWinuinkuiJsuaMiemSrg0KICAgIGZvcm1BZGRDbGljaygpIHsNCiAgICAgIHRoaXMuZm9ybUFkZFZpc2libGUgPSB0cnVlOw0KICAgIH0sDQogICAgLy8g54K55Ye75paw5aKe6KeS6Imy5oyJ6ZKu5ZCO56Gu5a6aDQogICAgYXN5bmMgZm9ybUFkZERldGVybWluZSgpIHsNCiAgICAgIHRyeSB7DQogICAgICAgIGF3YWl0IHRoaXMuJHJlZnMuZm9ybUFkZERhdGEudmFsaWRhdGUoKTsNCiAgICAgIH0gY2F0Y2ggKGVycikgew0KICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICB9DQogICAgICB0aGlzLmZvcm1BZGRWaXNpYmxlID0gZmFsc2U7DQogICAgICBjb25zdCByZXMgPSBhd2FpdCBhcGlzLmFkbWluQXBpLmFkZFVwbXNSb2xlKHRoaXMuZm9ybUFkZERhdGEpOw0KICAgICAgY29uc29sZS5sb2cocmVzKTsNCiAgICAgIGlmIChyZXMuZGF0YS5jb2RlID09IDApIHsNCiAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLmlrDlop7op5LoibLmiJDlip8iKTsNCiAgICAgICAgdGhpcy5yZWZyZXNoKCk7DQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHJlcy5kYXRhLm1zZyk7DQogICAgICB9DQogICAgfSwNCiAgICAvLyDngrnlh7vnvJbovpHmn5DmnaHop5LoibINCiAgICBmb3JtTW9kaWZ5Q2xpY2socm93KSB7DQogICAgICB0aGlzLnRhYmxlRGF0YVJvdyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkocm93KSk7DQogICAgICB0aGlzLmZvcm1Nb2RpZnlWaXNpYmxlID0gdHJ1ZTsNCiAgICB9LA0KICAgIC8vIOeCueWHu+e8lui+keafkOadoeinkuiJsuWQjuehruWumg0KICAgIGFzeW5jIGZvcm1Nb2RpZnlEZXRlcm1pbmUoKSB7DQogICAgICB0cnkgew0KICAgICAgICBhd2FpdCB0aGlzLiRyZWZzLnRhYmxlRGF0YVJvdy52YWxpZGF0ZSgpOw0KICAgICAgfSBjYXRjaCAoZXJyKSB7DQogICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgIH0NCiAgICAgIHRoaXMuZm9ybU1vZGlmeVZpc2libGUgPSBmYWxzZTsNCiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGFwaXMuYWRtaW5BcGkucHV0VXBtc1JvbGUodGhpcy50YWJsZURhdGFSb3cpOw0KICAgICAgY29uc29sZS5sb2cocmVzKTsNCiAgICAgIGlmIChyZXMuZGF0YS5jb2RlID09IDApIHsNCiAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLnvJbovpHop5LoibLmiJDlip8iKTsNCiAgICAgICAgdGhpcy5yZWZyZXNoKCk7DQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHJlcy5kYXRhLm1zZyk7DQogICAgICB9DQogICAgfSwNCiAgICAvLyDngrnlh7vliKDpmaTmn5DmnaHop5LoibINCiAgICBhc3luYyBmb3JtRGVsZXRlQ2xpY2socm93KSB7DQogICAgICB0cnkgew0KICAgICAgICBjb25zdCByZXMgPSBhd2FpdCB0aGlzLiRjb25maXJtKA0KICAgICAgICAgICLmraTmk43kvZzlsIbmsLjkuYXliKDpmaTmraTop5LoibIsIOaYr+WQpue7p+e7rT8iLA0KICAgICAgICAgICLmj5DnpLoiLA0KICAgICAgICAgIHsNCiAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAi56Gu5a6aIiwNCiAgICAgICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICLlj5bmtogiLA0KICAgICAgICAgICAgdHlwZTogIndhcm5pbmciLA0KICAgICAgICAgIH0NCiAgICAgICAgKTsNCiAgICAgICAgdGhpcy50YWJsZURhdGFSb3cgPSByb3c7DQogICAgICAgIHRoaXMuZm9ybURlbGV0ZURldGVybWluZSgpOw0KICAgICAgfSBjYXRjaCAoZXJyKSB7DQogICAgICAgIGNvbnNvbGUubG9nKGVycik7DQogICAgICB9DQogICAgfSwNCiAgICAvLyDnoa7lrprliKDpmaTmn5DmnaHop5LoibINCiAgICBhc3luYyBmb3JtRGVsZXRlRGV0ZXJtaW5lKCkgew0KICAgICAgY29uc3QgcmVzID0gYXdhaXQgYXBpcy5hZG1pbkFwaS5kZWxldGVVcG1zUm9sZSh0aGlzLnRhYmxlRGF0YVJvdy5pZCk7DQogICAgICBjb25zb2xlLmxvZyhyZXMpOw0KICAgICAgaWYgKHJlcy5kYXRhLmNvZGUgPT0gMCkgew0KICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIue8lui+keinkuiJsuaIkOWKnyIpOw0KICAgICAgICB0aGlzLnJlZnJlc2goKTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzLmRhdGEubXNnKTsNCiAgICAgIH0NCiAgICB9LA0KICAgIC8vIOeCueWHu+adg+mZkOaMiemSrg0KICAgIGFzeW5jIGZvcm1NZW51Q2xpY2socm93KSB7DQogICAgICB0aGlzLnRhYmxlRGF0YVJvdyA9IHJvdzsNCiAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IGFwaXMuYWRtaW5BcGkuZ2V0VXBtc01lbnVUcmVlUm9sZUlkKHJvdy5pZCk7DQogICAgICBjb25zb2xlLmxvZyhyZXMpOw0KICAgICAgdGhpcy5mb3JtTWVudURhdGFjaGVja2JveCA9IHJlcy5kYXRhLmRhdGE7DQogICAgICBjb25zdCBkYXRhID0gYXdhaXQgYXBpcy5hZG1pbkFwaS5nZXRVcG1zTWVudVRyZWUocm93LmlkKTsNCiAgICAgIGNvbnNvbGUubG9nKGRhdGEpOw0KICAgICAgdGhpcy5mb3JtTWVudURhdGEgPSBkYXRhLmRhdGEuZGF0YTsNCiAgICAgIHRoaXMuZm9ybU1lbnVWaXNpYmxlID0gdHJ1ZTsNCiAgICB9LA0KICAgIC8vIOabtOaWsOafkOadoeinkuiJsueahOadg+mZkA0KICAgIGFzeW5jIGZvcm1NZW51RGF0YVB1dCgpIHsNCiAgICAgIGNvbnN0IG1lbnVJZCA9IHRoaXMuJHJlZnMudHJlZQ0KICAgICAgICAuZ2V0Q2hlY2tlZEtleXMoKQ0KICAgICAgICAuY29uY2F0KHRoaXMuJHJlZnMudHJlZS5nZXRIYWxmQ2hlY2tlZEtleXMoKSkNCiAgICAgICAgLnRvU3RyaW5nKCk7IC8vIOebruWJjeiiq+mAieS4reeahOiKgueCueWSjOWKnumAieS4reeahOiKgueCueeahCBrZXkg5omA57uE5oiQ55qE5pWw57uEDQogICAgICBjb25zdCBwYXJhbSA9IHsNCiAgICAgICAgbWVudUlkOiBtZW51SWQsIC8vIOebruWJjeiiq+mAieS4reeahOiKgueCueeahCBrZXkg5omA57uE5oiQ55qE5pWw57uEDQogICAgICAgIHJvbGVJZDogdGhpcy50YWJsZURhdGFSb3cuaWQsIC8vIOinkuiJsmlkDQogICAgICB9Ow0KICAgICAgY29uc3QgcmVzID0gYXdhaXQgYXBpcy5hZG1pbkFwaS5wdXRVcG1zUm9sZU1lbnUocGFyYW0pOw0KICAgICAgY29uc29sZS5sb2cocmVzKTsNCiAgICAgIGlmIChyZXMuZGF0YS5jb2RlID09IDApIHsNCiAgICAgICAgdGhpcy5mb3JtTWVudVZpc2libGUgPSBmYWxzZTsNCiAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLliIbphY3mnYPpmZDmm7TmlrDmiJDlip8iKTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzLmRhdGEubXNnKTsNCiAgICAgIH0NCiAgICB9LA0KICB9LA0KfTsNCg=="},{"version":3,"sources":["roleManagement.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoRA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"roleManagement.vue","sourceRoot":"src/views/systemManagement","sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <!-- 操作区----start -->\r\n    <el-row class=\"mgb15\">\r\n      <el-col :span=\"23\">\r\n        <el-button\r\n          size=\"small\"\r\n          icon=\"el-icon-plus\"\r\n          type=\"primary\"\r\n          @click=\"formAddClick\"\r\n          >新增</el-button\r\n        >\r\n      </el-col>\r\n      <el-col :span=\"1\">\r\n        <!-- 刷新按钮 -->\r\n        <el-tooltip class=\"item\" effect=\"dark\" content=\"刷新\" placement=\"top\">\r\n          <el-button\r\n            icon=\"el-icon-refresh\"\r\n            circle\r\n            size=\"small\"\r\n            @click=\"refresh\"\r\n          ></el-button>\r\n        </el-tooltip>\r\n      </el-col>\r\n    </el-row>\r\n\r\n    <!-- 表格部分 -->\r\n    <el-table :data=\"tableData\" border stripe style=\"width: 100%\">\r\n      <el-table-column\r\n        :show-overflow-tooltip=\"$store.state.permission.tooltip\"\r\n        fixed\r\n        type=\"index\"\r\n        align=\"center\"\r\n        label=\"序号\"\r\n        min-width=\"150\"\r\n        width=\"60\"\r\n      >\r\n      </el-table-column>\r\n      <el-table-column\r\n        :show-overflow-tooltip=\"$store.state.permission.tooltip\"\r\n        prop=\"roleName\"\r\n        align=\"center\"\r\n        label=\"角色名称\"\r\n        min-width=\"120\"\r\n      >\r\n      </el-table-column>\r\n      <el-table-column\r\n        :show-overflow-tooltip=\"$store.state.permission.tooltip\"\r\n        prop=\"roleCode\"\r\n        align=\"center\"\r\n        label=\"角色编码\"\r\n        min-width=\"120\"\r\n      >\r\n      </el-table-column>\r\n      <el-table-column\r\n        :show-overflow-tooltip=\"$store.state.permission.tooltip\"\r\n        prop=\"roleDesc\"\r\n        align=\"center\"\r\n        label=\"角色描述\"\r\n        min-width=\"120\"\r\n      >\r\n      </el-table-column>\r\n      <el-table-column\r\n        :show-overflow-tooltip=\"$store.state.permission.tooltip\"\r\n        prop=\"dsType\"\r\n        align=\"center\"\r\n        label=\"数据权限\"\r\n        min-width=\"300\"\r\n      >\r\n      </el-table-column>\r\n      <el-table-column\r\n        :show-overflow-tooltip=\"$store.state.permission.tooltip\"\r\n        prop=\"updateTime\"\r\n        align=\"center\"\r\n        label=\"创建时间\"\r\n        min-width=\"120\"\r\n      >\r\n      </el-table-column>\r\n      <el-table-column\r\n        :show-overflow-tooltip=\"$store.state.permission.tooltip\"\r\n        fixed=\"right\"\r\n        align=\"center\"\r\n        label=\"操作\"\r\n        min-width=\"100\"\r\n      >\r\n        <template slot-scope=\"scope\">\r\n          <el-button\r\n            @click=\"formSeeClick(scope.row)\"\r\n            type=\"text\"\r\n            size=\"small\"\r\n            icon=\"el-icon-view\"\r\n            >查看</el-button\r\n          >\r\n          <el-button\r\n            @click=\"formModifyClick(scope.row)\"\r\n            type=\"text\"\r\n            size=\"small\"\r\n            icon=\"el-icon-edit\"\r\n            >编辑</el-button\r\n          >\r\n          <el-button\r\n            @click=\"formDeleteClick(scope.row)\"\r\n            type=\"text\"\r\n            size=\"small\"\r\n            icon=\"el-icon-delete\"\r\n            >删 除</el-button\r\n          >\r\n          <el-button\r\n            @click=\"formMenuClick(scope.row)\"\r\n            type=\"text\"\r\n            size=\"small\"\r\n            icon=\"el-icon-document\"\r\n            >权限</el-button\r\n          >\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n    <!-- 查看角色---start -->\r\n    <el-dialog\r\n      title=\"查看角色\"\r\n      class=\"see\"\r\n      :visible.sync=\"formSeeVisible\"\r\n      width=\"700px\"\r\n    >\r\n      <el-form\r\n        :label-position=\"labelPosition\"\r\n        :label-width=\"labelWidth\"\r\n        :inline=\"true\"\r\n        :model=\"tableDataRow\"\r\n        class=\"demo-form-inline\"\r\n      >\r\n        <el-form-item label=\"角色名称\">\r\n          <el-input v-model=\"tableDataRow.roleName\" readonly></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"角色编码\">\r\n          <el-input v-model=\"tableDataRow.roleCode\" readonly></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"角色描述\">\r\n          <el-input v-model=\"tableDataRow.roleDesc\" readonly></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"数据权限\">\r\n          <el-input v-model=\"tableDataRow.dsType\" readonly></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"创建时间\">\r\n          <el-input v-model=\"tableDataRow.updateTime\" readonly></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n    </el-dialog>\r\n\r\n    <!-- 编辑角色---start -->\r\n    <el-dialog\r\n      title=\"编辑角色\"\r\n      :visible.sync=\"formModifyVisible\"\r\n      @closed=\"\r\n        tableDataRow = {};\r\n        $refs.tableDataRow.resetFields();\r\n      \"\r\n      width=\"700px\"\r\n    >\r\n      <el-form\r\n        :label-position=\"labelPosition\"\r\n        :label-width=\"labelWidth\"\r\n        :inline=\"true\"\r\n        :model=\"tableDataRow\"\r\n        class=\"demo-form-inline lazy-form\" \r\n        ref=\"tableDataRow\"\r\n      >\r\n        <el-form-item\r\n          label=\"角色名称\"\r\n          prop=\"roleName\"\r\n          :rules=\"{ required: true, message: '角色名称不能为空' }\"\r\n        >\r\n          <el-input v-model=\"tableDataRow.roleName\" clearable></el-input>\r\n        </el-form-item>\r\n        <el-form-item\r\n          label=\"角色编码\"\r\n          prop=\"roleCode\"\r\n          :rules=\"{ required: true, message: '角色编码不能为空' }\"\r\n        >\r\n          <el-input v-model=\"tableDataRow.roleCode\" disabled></el-input>\r\n        </el-form-item>\r\n        <el-form-item\r\n          label=\"角色描述\"\r\n          prop=\"roleDesc\"\r\n          :rules=\"{ required: true, message: '角色描述不能为空' }\"\r\n        >\r\n          <el-input v-model=\"tableDataRow.roleDesc\" clearable></el-input>\r\n        </el-form-item>\r\n        <el-form-item\r\n          label=\"数据权限\"\r\n          prop=\"dsType\"\r\n          :rules=\"{ required: true, message: '数据权限不能为空' }\"\r\n        >\r\n          <el-input v-model=\"tableDataRow.dsType\" clearable></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"formModifyVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"formModifyDetermine\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n\r\n    <!-- 新增角色---start -->\r\n    <el-dialog\r\n      title=\"新增角色\"\r\n      :visible.sync=\"formAddVisible\"\r\n      @closed=\"\r\n        formAddData = {};\r\n        $refs.formAddData.resetFields();\r\n      \"\r\n      width=\"700px\"\r\n    >\r\n      <el-form\r\n        :label-position=\"labelPosition\"\r\n        :label-width=\"labelWidth\"\r\n        :inline=\"true\"\r\n        :model=\"formAddData\"\r\n        class=\"demo-form-inline lazy-form\"\r\n        ref=\"formAddData\"\r\n      >\r\n        <el-form-item\r\n          label=\"角色名称\"\r\n          prop=\"roleName\"\r\n          :rules=\"{ required: true, message: '角色名称不能为空' }\"\r\n        >\r\n          <el-input v-model=\"formAddData.roleName\" clearable></el-input>\r\n        </el-form-item>\r\n        <el-form-item\r\n          label=\"角色编码\"\r\n          prop=\"roleCode\"\r\n          :rules=\"{ required: true, message: '角色编码不能为空' }\"\r\n        >\r\n          <el-input v-model=\"formAddData.roleCode\" clearable></el-input>\r\n        </el-form-item>\r\n        <el-form-item\r\n          label=\"角色描述\"\r\n          prop=\"roleDesc\"\r\n          :rules=\"{ required: true, message: '角色描述不能为空' }\"\r\n        >\r\n          <el-input v-model=\"formAddData.roleDesc\" clearable></el-input>\r\n        </el-form-item>\r\n        <el-form-item\r\n          label=\"数据权限\"\r\n          prop=\"dsType\"\r\n          :rules=\"{ required: true, message: '数据权限不能为空' }\"\r\n        >\r\n          <el-input v-model=\"formAddData.dsType\" clearable></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"formAddVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"formAddDetermine\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n\r\n    <!-- 分配权限 ---start -->\r\n    <el-dialog title=\"分配权限\" :visible.sync=\"formMenuVisible\" width=\"700px\">\r\n      <el-tree\r\n        :data=\"formMenuData\"\r\n        default-expand-all\r\n        show-checkbox\r\n        node-key=\"id\"\r\n        :default-checked-keys=\"formMenuDatacheckbox\"\r\n        :props=\"defaultProps\"\r\n        ref=\"tree\"\r\n      >\r\n      </el-tree>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"formMenuVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"formMenuDataPut\">更 新</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport apis from \"@/apis/apis\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      tableData: [], // 表格内容\r\n      tableDataRow: {}, // 表格的某条内容\r\n      formSeeVisible: false, // 查看角色弹出框的布尔值\r\n      labelPosition: \"right\", //lable对齐方式\r\n      labelWidth: \"80px\", //lable宽度\r\n      formModifyVisible: false, // 编辑角色弹出框的布尔值\r\n      formAddData: {\r\n        roleName: \"\",\r\n        roleCode: \"\",\r\n        roleDesc: \"\",\r\n        dsType: \"\",\r\n        createTime: \"\",\r\n      }, // 新增内容\r\n      formAddVisible: false, // 新增角色弹出框的布尔值\r\n      formMenuVisible: false, // 权限弹出框的布尔值\r\n      formMenuData: [], // 权限的树形数据\r\n      formMenuDatacheckbox: [], // 权限的树形数据默认选中的节点数组\r\n      // 权限配置选项\r\n      defaultProps: {\r\n        children: \"children\", //指定节点标签为节点对象的某个属性值\r\n        label: \"label\", //指定子树为节点对象的某个属性值\r\n      },\r\n    };\r\n  },\r\n  // 初始化表格参数\r\n  mounted() {\r\n    this.formGetClick();\r\n  },\r\n  methods: {\r\n    // 获取所有角色数据\r\n    async formGetClick() {\r\n      const res = await apis.adminApi.getUpmsRolePage();\r\n      console.log(res);\r\n      this.tableData = res.data.data.records;\r\n      console.log(this.tableData);\r\n    },\r\n    // 刷新按钮\r\n    refresh() {\r\n      this.tableData = [];\r\n      this.formGetClick();\r\n    },\r\n    // 点击查看某条角色\r\n    formSeeClick(row) {\r\n      console.log(row);\r\n      this.tableDataRow = row;\r\n      this.formSeeVisible = true;\r\n    },\r\n    // 点击新增角色按钮\r\n    formAddClick() {\r\n      this.formAddVisible = true;\r\n    },\r\n    // 点击新增角色按钮后确定\r\n    async formAddDetermine() {\r\n      try {\r\n        await this.$refs.formAddData.validate();\r\n      } catch (err) {\r\n        return false;\r\n      }\r\n      this.formAddVisible = false;\r\n      const res = await apis.adminApi.addUpmsRole(this.formAddData);\r\n      console.log(res);\r\n      if (res.data.code == 0) {\r\n        this.$message.success(\"新增角色成功\");\r\n        this.refresh();\r\n      } else {\r\n        this.$message.error(res.data.msg);\r\n      }\r\n    },\r\n    // 点击编辑某条角色\r\n    formModifyClick(row) {\r\n      this.tableDataRow = JSON.parse(JSON.stringify(row));\r\n      this.formModifyVisible = true;\r\n    },\r\n    // 点击编辑某条角色后确定\r\n    async formModifyDetermine() {\r\n      try {\r\n        await this.$refs.tableDataRow.validate();\r\n      } catch (err) {\r\n        return false;\r\n      }\r\n      this.formModifyVisible = false;\r\n      const res = await apis.adminApi.putUpmsRole(this.tableDataRow);\r\n      console.log(res);\r\n      if (res.data.code == 0) {\r\n        this.$message.success(\"编辑角色成功\");\r\n        this.refresh();\r\n      } else {\r\n        this.$message.error(res.data.msg);\r\n      }\r\n    },\r\n    // 点击删除某条角色\r\n    async formDeleteClick(row) {\r\n      try {\r\n        const res = await this.$confirm(\r\n          \"此操作将永久删除此角色, 是否继续?\",\r\n          \"提示\",\r\n          {\r\n            confirmButtonText: \"确定\",\r\n            cancelButtonText: \"取消\",\r\n            type: \"warning\",\r\n          }\r\n        );\r\n        this.tableDataRow = row;\r\n        this.formDeleteDetermine();\r\n      } catch (err) {\r\n        console.log(err);\r\n      }\r\n    },\r\n    // 确定删除某条角色\r\n    async formDeleteDetermine() {\r\n      const res = await apis.adminApi.deleteUpmsRole(this.tableDataRow.id);\r\n      console.log(res);\r\n      if (res.data.code == 0) {\r\n        this.$message.success(\"编辑角色成功\");\r\n        this.refresh();\r\n      } else {\r\n        this.$message.error(res.data.msg);\r\n      }\r\n    },\r\n    // 点击权限按钮\r\n    async formMenuClick(row) {\r\n      this.tableDataRow = row;\r\n      const res = await apis.adminApi.getUpmsMenuTreeRoleId(row.id);\r\n      console.log(res);\r\n      this.formMenuDatacheckbox = res.data.data;\r\n      const data = await apis.adminApi.getUpmsMenuTree(row.id);\r\n      console.log(data);\r\n      this.formMenuData = data.data.data;\r\n      this.formMenuVisible = true;\r\n    },\r\n    // 更新某条角色的权限\r\n    async formMenuDataPut() {\r\n      const menuId = this.$refs.tree\r\n        .getCheckedKeys()\r\n        .concat(this.$refs.tree.getHalfCheckedKeys())\r\n        .toString(); // 目前被选中的节点和办选中的节点的 key 所组成的数组\r\n      const param = {\r\n        menuId: menuId, // 目前被选中的节点的 key 所组成的数组\r\n        roleId: this.tableDataRow.id, // 角色id\r\n      };\r\n      const res = await apis.adminApi.putUpmsRoleMenu(param);\r\n      console.log(res);\r\n      if (res.data.code == 0) {\r\n        this.formMenuVisible = false;\r\n        this.$message.success(\"分配权限更新成功\");\r\n      } else {\r\n        this.$message.error(res.data.msg);\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n</style>"]}]}