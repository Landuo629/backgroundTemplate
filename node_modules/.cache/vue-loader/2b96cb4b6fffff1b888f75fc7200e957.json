{"remainingRequest":"C:\\Users\\84715\\Desktop\\q\\background-template\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\84715\\Desktop\\q\\background-template\\src\\views\\systemManagement\\organManagement.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\84715\\Desktop\\q\\background-template\\src\\views\\systemManagement\\organManagement.vue","mtime":1608618724690},{"path":"C:\\Users\\84715\\Desktop\\q\\background-template\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\84715\\Desktop\\q\\background-template\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"C:\\Users\\84715\\Desktop\\q\\background-template\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\84715\\Desktop\\q\\background-template\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgYXBpcyBmcm9tICJAL2FwaXMvYXBpcyI7DQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICJvcmdhbk1hbmFnZW1lbnQiLA0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICB0YWJsZURhdGE6IFtdLCAvLyDooajmoLzkuLvkvZPmlbDmja4NCiAgICAgIHRhYmxlRGF0YVJvdzoge30sIC8vIOW9k+WJjemAieS4reeahOWNleihjOaVsOaNrg0KICAgICAgZm9ybVNlZVZpc2libGU6IGZhbHNlLCAvLyDmn6XnnIvmnLrmnoTlvLnlh7rmoYbnmoTluIPlsJTlgLwNCiAgICAgIGZvcm1Nb2RpZnlWaXNpYmxlOiBmYWxzZSwgLy8g57yW6L6R6KeS6Imy5by55Ye65qGG55qE5biD5bCU5YC8DQogICAgICBsYWJlbFBvc2l0aW9uOiAicmlnaHQiLCAvL2xhYmxl5a+56b2Q5pa55byPDQogICAgICBsYWJlbFdpZHRoOiAiODBweCIsIC8vbGFibGXlrr3luqYNCiAgICAgIC8vIOaWsOWinuaVsOaNrg0KICAgICAgZm9ybUFkZERhdGE6IHsNCiAgICAgICAgcGFyZW50SWQ6ICIiLA0KICAgICAgICBuYW1lOiAiIiwNCiAgICAgICAgdHlwZTogIiIsDQogICAgICAgIHNvcnQ6ICIiLA0KICAgICAgICBwaG9uZTogIiIsDQogICAgICAgIGNvZGU6ICIiLA0KICAgICAgICBmYXg6ICIiLA0KICAgICAgICBlbWFpbDogIiIsDQogICAgICAgIGFkZHJlc3M6ICIiLA0KICAgICAgICByZW1hcmtzOiAiIiwNCiAgICAgICAgcGFyZW50TmFtZTogIiIsDQogICAgICB9LA0KICAgICAgLy8g54i257qn5py65p6E55qE57uE57uH5qCR6YWN572uDQogICAgICB1cE1lbnVQcm9wczogew0KICAgICAgICBsYWJlbDogIm5hbWUiLCAvLyDmjIflrproioLngrnmoIfnrb7kuLroioLngrnlr7nosaHnmoTmn5DkuKrlsZ7mgKflgLwNCiAgICAgICAgY2hpbGRyZW46ICJjaGlsZHJlbiIsIC8vIOaMh+WumuWtkOagkeS4uuiKgueCueWvueixoeeahOafkOS4quWxnuaAp+WAvA0KICAgICAgfSwNCiAgICAgIGZyb21BZGRWaXNpYmxlOiBmYWxzZSwgLy8g5paw5aKe5py65p6E5by55Ye65qGG55qE5biD5bCU5YC8DQogICAgfTsNCiAgfSwNCiAgLy8g5Yid5aeL5YyW5pWw5o2uDQogIG1vdW50ZWQoKSB7DQogICAgdGhpcy5mb3JtR2V0Q2xpY2soKTsNCiAgfSwNCiAgY29tcHV0ZWQ6IHsNCiAgICBidXR0b25MaXN0KCkgew0KICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLl9tb2R1bGVzLnJvb3QuY29udGV4dC5zdGF0ZS5idXR0b24uYnV0dG9uTGlzdDsNCiAgICB9LA0KICB9LA0KICBtZXRob2RzOiB7DQogICAgLy8g6I635Y+W5omA5pyJ6KGo5qC85pWw5o2uDQogICAgYXN5bmMgZm9ybUdldENsaWNrKCkgew0KICAgICAgY29uc3QgcmVzID0gYXdhaXQgYXBpcy5hZG1pbkFwaS5nZXRVcG1zT3JnYW5UcmVlKCk7DQogICAgICBjb25zb2xlLmxvZyhyZXMpOw0KICAgICAgaWYgKHJlcy5kYXRhLmNvZGUgPT0gMCkgew0KICAgICAgICB0aGlzLnRhYmxlRGF0YSA9IHJlcy5kYXRhLmRhdGE7DQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHJlcy5kYXRhLm1zZyk7DQogICAgICB9DQogICAgfSwNCiAgICAvLyDliLfmlrDooajmoLzmlbDmja4NCiAgICByZWZyZXNoKCkgew0KICAgICAgdGhpcy50YWJsZURhdGEgPSBbXTsNCiAgICAgIHRoaXMuZm9ybUdldENsaWNrKCk7DQogICAgfSwNCiAgICAvLyDngrnlh7vmn6XnnIvmn5DmnaHnp5/miLcNCiAgICBmb3JtU2VlQ2xpY2socm93KSB7DQogICAgICBjb25zb2xlLmxvZyhyb3cpOw0KICAgICAgdGhpcy50YWJsZURhdGFSb3cgPSByb3c7DQogICAgICB0aGlzLnBhcmVudElkVG9OYW1lKCk7DQogICAgICB0aGlzLmZvcm1TZWVWaXNpYmxlID0gdHJ1ZTsNCiAgICB9LA0KICAgIC8vIOagueaNruW9k+WJjeacuuaehOeahOeItue6p2lk5Y675p+l6K+i5a+55bqU55qEbmFtZQ0KICAgIGFzeW5jIHBhcmVudElkVG9OYW1lKCkgew0KICAgICAgY29uc3QgcmVzID0gYXdhaXQgYXBpcy5hZG1pbkFwaS5nZXRVcG1zT3JnYW5JZCgNCiAgICAgICAgdGhpcy50YWJsZURhdGFSb3cucGFyZW50SWQNCiAgICAgICk7DQogICAgICBjb25zb2xlLmxvZyhyZXMpOw0KICAgICAgLy8g5aaC5p6c5p+l5LiN5Ye6bmFtZeWAvOeahOivneS9v+eUqOmhtue6pw0KICAgICAgdHJ5IHsNCiAgICAgICAgdGhpcy4kc2V0KHRoaXMudGFibGVEYXRhUm93LCAicGFyZW50TmFtZSIsIHJlcy5kYXRhLmRhdGEubmFtZSk7DQogICAgICB9IGNhdGNoIChlKSB7DQogICAgICAgIHRoaXMuJHNldCh0aGlzLnRhYmxlRGF0YVJvdywgInBhcmVudE5hbWUiLCAi6ZuG5Zui5YWs5Y+4Iik7DQogICAgICB9DQogICAgfSwNCiAgICAvLyDngrnlh7vmnLrmnoTmlrDlop7mjInpkq4NCiAgICBmb3JtQWRkQ2xpY2soKSB7DQogICAgICB0aGlzLmZyb21BZGRWaXNpYmxlID0gdHJ1ZTsNCiAgICB9LA0KICAgIC8vIOehruiupOWinuWKoOacuuaehA0KICAgIGFzeW5jIGZvcm1BZGREZXRlcm1pbmUoKSB7DQogICAgICB0cnkgew0KICAgICAgICBhd2FpdCB0aGlzLiRyZWZzLmZvcm1BZGREYXRhLnZhbGlkYXRlKCk7DQogICAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgfQ0KICAgICAgY29uc3QgcmVzID0gYXdhaXQgYXBpcy5hZG1pbkFwaS5wb3N0VXBtc09yZ2FuKHRoaXMuZm9ybUFkZERhdGEpOw0KICAgICAgdGhpcy5mcm9tQWRkVmlzaWJsZSA9IGZhbHNlOw0KICAgICAgaWYgKHJlcy5kYXRhLmNvZGUgPT0gMCkgew0KICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIuWinuWKoOacuuaehOaIkOWKnyIpOw0KICAgICAgICB0aGlzLnJlZnJlc2goKTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzLmRhdGEubXNnKTsNCiAgICAgIH0NCiAgICB9LA0KICAgIC8vIOaWsOWinuacuuaehOW8ueahhueahOS4iue6p+acuuaehOiiq+eCueWHu+aXtueahOWbnuiwgyB8fCDnvJbovpHmnLrmnoTlvLnmoYbnmoTkuIrnuqfmnLrmnoTooqvngrnlh7vml7bnmoTlm57osIMNCiAgICB1cE1lbnVEYXRhVHJlZUNsaWNrKHJvdywgZSkgew0KICAgICAgY29uc29sZS5sb2cocm93LCBlKTsNCiAgICAgIGlmIChlID09ICJhZGQiKSB7DQogICAgICAgIHRoaXMuZm9ybUFkZERhdGEucGFyZW50TmFtZSA9IHJvdy5uYW1lOyAvLyDmiorlvZPliY3mnLrmnoTnmoRuYW1l57uZ5LiL57qn5py65p6E55qE54i2cGFyZW50TmFtZQ0KICAgICAgICB0aGlzLmZvcm1BZGREYXRhLnBhcmVudElkID0gcm93LmlkOyAvLyDmiorlvZPliY3mnLrmnoTnmoRpZOe7meS4i+e6p+acuuaehOeahOeItmlkDQogICAgICB9IGVsc2Ugew0KICAgICAgICB0aGlzLnRhYmxlRGF0YVJvdy5wYXJlbnROYW1lID0gcm93Lm5hbWU7IC8vIOaKiuW9k+WJjeacuuaehOeahG5hbWXnu5nkuIvnuqfmnLrmnoTnmoTniLZwYXJlbnROYW1lDQogICAgICAgIHRoaXMudGFibGVEYXRhUm93LnBhcmVudElkID0gcm93LmlkOyAvLyDmiorlvZPliY3mnLrmnoTnmoRpZOe7meS4i+e6p+acuuaehOeahOeItmlkDQogICAgICB9DQogICAgfSwNCiAgICAvLyDngrnlh7vnvJbovpHmn5DmnaHmnLrmnoQNCiAgICBmb3JtTW9kaWZ5Q2xpY2socm93KSB7DQogICAgICBjb25zb2xlLmxvZyhyb3cpOw0KICAgICAgdGhpcy50YWJsZURhdGFSb3cgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHJvdykpOw0KICAgICAgdGhpcy5wYXJlbnRJZFRvTmFtZSgpOw0KICAgICAgdGhpcy5mb3JtTW9kaWZ5VmlzaWJsZSA9IHRydWU7DQogICAgfSwNCiAgICAvLyDngrnlh7vnvJbovpHmn5DmnaHmnLrmnoTlkI7noa7lrpoNCiAgICBhc3luYyBmb3JtTW9kaWZ5RGV0ZXJtaW5lKCkgew0KICAgICAgdHJ5IHsNCiAgICAgICAgYXdhaXQgdGhpcy4kcmVmcy50YWJsZURhdGFSb3cudmFsaWRhdGUoKTsNCiAgICAgIH0gY2F0Y2ggKGVycikgew0KICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICB9DQogICAgICB0aGlzLmZvcm1Nb2RpZnlWaXNpYmxlID0gZmFsc2U7DQogICAgICBjb25zdCByZXMgPSBhd2FpdCBhcGlzLmFkbWluQXBpLnB1dFVwbXNPcmdhbih0aGlzLnRhYmxlRGF0YVJvdyk7DQogICAgICBjb25zb2xlLmxvZyhyZXMpOw0KICAgICAgaWYgKHJlcy5kYXRhLmNvZGUgPT0gMCkgew0KICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIue8lui+keenn+aIt+aIkOWKnyIpOw0KICAgICAgICB0aGlzLnJlZnJlc2goKTsNCiAgICAgIH0gZWxzZSB7DQogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IocmVzLmRhdGEubXNnKTsNCiAgICAgIH0NCiAgICB9LA0KICAgIC8vIOeCueWHu+WIoOmZpOafkOadoeenn+aItw0KICAgIGFzeW5jIGZvcm1EZWxldGVDbGljayhyb3cpIHsNCiAgICAgIHRyeSB7DQogICAgICAgIGNvbnN0IHJlcyA9IGF3YWl0IHRoaXMuJGNvbmZpcm0oDQogICAgICAgICAgIuatpOaTjeS9nOWwhuawuOS5heWIoOmZpOatpOenn+aItywg5piv5ZCm57un57utPyIsDQogICAgICAgICAgIuaPkOekuiIsDQogICAgICAgICAgew0KICAgICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICLnoa7lrpoiLA0KICAgICAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogIuWPlua2iCIsDQogICAgICAgICAgICB0eXBlOiAid2FybmluZyIsDQogICAgICAgICAgfQ0KICAgICAgICApOw0KICAgICAgICB0aGlzLnRhYmxlRGF0YVJvdyA9IHJvdzsNCiAgICAgICAgdGhpcy5mb3JtRGVsZXRlRGV0ZXJtaW5lKCk7DQogICAgICB9IGNhdGNoIChlcnIpIHsNCiAgICAgICAgY29uc29sZS5sb2coZXJyKTsNCiAgICAgIH0NCiAgICB9LA0KICAgIC8vIOehruWumuWIoOmZpOafkOadoeenn+aItw0KICAgIGFzeW5jIGZvcm1EZWxldGVEZXRlcm1pbmUoKSB7DQogICAgICBjb25zdCByZXMgPSBhd2FpdCBhcGlzLmFkbWluQXBpLmRlbGV0ZVVwbXNPcmdhbklkKHRoaXMudGFibGVEYXRhUm93LmlkKTsNCiAgICAgIGNvbnNvbGUubG9nKHJlcyk7DQogICAgICBpZiAocmVzLmRhdGEuY29kZSA9PSAwKSB7DQogICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygi5Yig6Zmk56ef5oi35oiQ5YqfIik7DQogICAgICAgIHRoaXMucmVmcmVzaCgpOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcihyZXMuZGF0YS5tc2cpOw0KICAgICAgfQ0KICAgIH0sDQogIH0sDQp9Ow0K"},{"version":3,"sources":["organManagement.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"organManagement.vue","sourceRoot":"src/views/systemManagement","sourcesContent":["<template>\r\n  <div class=\"container\">\r\n    <!-- 操作区----start -->\r\n    <el-row class=\"mgb15\">\r\n      <!-- 新增按钮 -->\r\n      <el-col :span=\"23\">\r\n        <el-button\r\n          size=\"small\"\r\n          type=\"primary\"\r\n          @click=\"formAddClick\"\r\n          icon=\"el-icon-plus\"\r\n          v-if=\"buttonList.indexOf('sys:organ:add') != -1\"\r\n          >新增</el-button\r\n        >\r\n      </el-col>\r\n      <el-col :span=\"1\">\r\n        <!-- 刷新按钮 -->\r\n        <el-tooltip class=\"item\" effect=\"dark\" content=\"刷新\" placement=\"top\">\r\n          <el-button\r\n            icon=\"el-icon-refresh\"\r\n            circle\r\n            size=\"small\"\r\n            @click=\"refresh\"\r\n          ></el-button>\r\n        </el-tooltip>\r\n      </el-col>\r\n    </el-row>\r\n\r\n    <!-- 表格区域 -->\r\n    <el-table\r\n      :data=\"tableData\"\r\n      style=\"width: 100%\"\r\n      row-key=\"id\"\r\n      border\r\n      :tree-props=\"{ children: 'children' }\"\r\n    >\r\n      <el-table-column\r\n        :show-overflow-tooltip=\"$store.state.permission.tooltip\"\r\n        prop=\"name\"\r\n        label=\"机构名称\"\r\n        sortable\r\n        width=\"180\"\r\n        align=\"center\"\r\n      >\r\n      </el-table-column>\r\n      <el-table-column\r\n        :show-overflow-tooltip=\"$store.state.permission.tooltip\"\r\n        label=\"机构类型\"\r\n        sortable\r\n        width=\"120\"\r\n        align=\"center\"\r\n      >\r\n        <template slot-scope=\"scope\">\r\n          <span>{{\r\n            scope.row.type == 1\r\n              ? \"公司\"\r\n              : scope.row.type == 2\r\n              ? \"部门\"\r\n              : scope.row.type == 3\r\n              ? \"小组\"\r\n              : \"其它\"\r\n          }}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column\r\n        :show-overflow-tooltip=\"$store.state.permission.tooltip\"\r\n        prop=\"sort\"\r\n        width=\"100\"\r\n        label=\"排序\"\r\n        align=\"center\"\r\n      >\r\n      </el-table-column>\r\n      <el-table-column\r\n        :show-overflow-tooltip=\"$store.state.permission.tooltip\"\r\n        prop=\"createTime\"\r\n        label=\"创建时间\"\r\n        align=\"center\"\r\n      >\r\n      </el-table-column>\r\n      <el-table-column width=\"200\" label=\"操作\" align=\"center\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button\r\n            @click=\"formSeeClick(scope.row)\"\r\n            type=\"text\"\r\n            size=\"small\"\r\n            icon=\"el-icon-view\"\r\n            v-if=\"buttonList.indexOf('sys:organ:get') != -1\"\r\n            >查看</el-button\r\n          >\r\n          <el-button\r\n            @click=\"formModifyClick(scope.row)\"\r\n            type=\"text\"\r\n            size=\"small\"\r\n            icon=\"el-icon-edit\"\r\n            v-if=\"buttonList.indexOf('sys:organ:edit') != -1\"\r\n            >编辑</el-button\r\n          >\r\n          <el-button\r\n            @click=\"formDeleteClick(scope.row)\"\r\n            type=\"text\"\r\n            size=\"small\"\r\n            icon=\"el-icon-delete\"\r\n            v-if=\"buttonList.indexOf('sys:organ:del') != -1\"\r\n            >删 除</el-button\r\n          >\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <!-- 查看租户 ---start -->\r\n    <el-dialog\r\n      title=\"查看\"\r\n      class=\"see\"\r\n      :visible.sync=\"formSeeVisible\"\r\n      width=\"700px\"\r\n    >\r\n      <el-form\r\n        :label-position=\"labelPosition\"\r\n        :label-width=\"labelWidth\"\r\n        :inline=\"true\"\r\n        :model=\"tableDataRow\"\r\n        class=\"demo-form-inline\"\r\n      >\r\n        <el-form-item label=\"父类机构\">\r\n          <el-input :value=\"tableDataRow.parentName\" readonly></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"机构名称\">\r\n          <el-input :value=\"tableDataRow.name\" readonly></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"机构类型\">\r\n          <el-input\r\n            :value=\"parseInt(tableDataRow.type, 10) ? '公司' : '部门'\"\r\n            readonly\r\n          ></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"机构编码\">\r\n          <el-input :value=\"tableDataRow.code\" readonly></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"排序\">\r\n          <el-input :value=\"tableDataRow.sort\" readonly></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"电话\">\r\n          <el-input :value=\"tableDataRow.phone\" readonly></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"传真\">\r\n          <el-input :value=\"tableDataRow.fax\" readonly></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"邮箱\">\r\n          <el-input :value=\"tableDataRow.email\" readonly></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"地址\">\r\n          <el-input :value=\"tableDataRow.address\" readonly></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"备注\">\r\n          <el-input :value=\"tableDataRow.remarks\" readonly></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"创建时间\">\r\n          <el-input :value=\"tableDataRow.createTime\" readonly></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"修改时间\">\r\n          <el-input :value=\"tableDataRow.updateTime\" readonly></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n    </el-dialog>\r\n\r\n    <!-- 新增机构---start -->\r\n    <el-dialog\r\n      title=\"新增机构\"\r\n      :visible.sync=\"fromAddVisible\"\r\n      @closed=\"\r\n        formAddData = { parentName: '' };\r\n        $refs.formAddData.resetFields();\r\n      \"\r\n      width=\"700px\"\r\n    >\r\n      <el-form\r\n        :label-position=\"labelPosition\"\r\n        :label-width=\"labelWidth\"\r\n        :inline=\"true\"\r\n        :model=\"formAddData\"\r\n        class=\"demo-form-inline\"\r\n        ref=\"formAddData\"\r\n      >\r\n        <el-form-item\r\n          label=\"父类机构\"\r\n          prop=\"parentId\"\r\n          :rules=\"{\r\n            required: true,\r\n            message: '请选择父类机构',\r\n          }\"\r\n        >\r\n          <!-- 选择框自定义模板 -->\r\n          <el-select\r\n            v-model=\"formAddData.parentName\"\r\n            value-key=\"parentId\"\r\n            placeholder=\"请选择\"\r\n          >\r\n            <!-- el-option 属性没有的话会让tree没有数据，所以设置为零 -->\r\n            <el-option value=\"\" style=\"height: 0px\"> </el-option>\r\n            <el-tree\r\n              :data=\"tableData\"\r\n              :props=\"upMenuProps\"\r\n              @node-click=\"upMenuDataTreeClick($event, 'add')\"\r\n            ></el-tree>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item\r\n          label=\"机构名称\"\r\n          prop=\"name\"\r\n          :rules=\"{ required: true, message: '机构名称不能为空' }\"\r\n        >\r\n          <el-input v-model=\"formAddData.name\" clearable></el-input>\r\n        </el-form-item>\r\n        <el-form-item\r\n          label=\"机构类型\"\r\n          prop=\"type\"\r\n          :rules=\"{\r\n            required: true,\r\n            message: '请选择机构类型',\r\n            trigger: 'change',\r\n          }\"\r\n        >\r\n          <el-select v-model=\"formAddData.type\" clearable placeholder=\"请选择\">\r\n            <el-option key=\"1\" label=\"公司\" value=\"1\"> </el-option>\r\n            <el-option key=\"2\" label=\"部门\" value=\"2\"> </el-option>\r\n            <el-option key=\"3\" label=\"小组\" value=\"3\"> </el-option>\r\n            <el-option key=\"4\" label=\"其它\" value=\"4\"> </el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item\r\n          label=\"机构编码\"\r\n          prop=\"code\"\r\n          :rules=\"{ required: true, message: '机构编码不能为空' }\"\r\n        >\r\n          <el-input v-model=\"formAddData.code\" clearable></el-input>\r\n        </el-form-item>\r\n        <el-form-item\r\n          label=\"排序\"\r\n          prop=\"sort\"\r\n          :rules=\"{ required: true, message: '排序不能为空' }\"\r\n        >\r\n          <el-input\r\n            v-model=\"formAddData.sort\"\r\n            type=\"number\"\r\n            clearable\r\n          ></el-input>\r\n        </el-form-item>\r\n        <el-form-item\r\n          label=\"电话\"\r\n          prop=\"phone\"\r\n          :rules=\"[{ min: 11, max: 11, message: '长度在11个字符' }]\"\r\n        >\r\n          <el-input v-model=\"formAddData.phone\" clearable></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"传真\">\r\n          <el-input v-model=\"formAddData.fax\" clearable></el-input>\r\n        </el-form-item>\r\n        <el-form-item\r\n          label=\"邮箱\"\r\n          prop=\"email\"\r\n          :rules=\"[\r\n            {\r\n              type: 'email',\r\n              message: '请输入正确的邮箱地址',\r\n              trigger: ['blur', 'change'],\r\n            },\r\n          ]\"\r\n        >\r\n          <el-input v-model=\"formAddData.email\" clearable></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"地址\">\r\n          <el-input v-model=\"formAddData.address\" clearable></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"备注\">\r\n          <el-input v-model=\"formAddData.remarks\" clearable></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"fromAddVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"formAddDetermine\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n\r\n    <!-- 编辑租户---start -->\r\n    <el-dialog\r\n      title=\"编辑租户\"\r\n      :visible.sync=\"formModifyVisible\"\r\n      @closed=\"\r\n        tableDataRow = {};\r\n        $refs.tableDataRow.resetFields();\r\n      \"\r\n      width=\"700px\"\r\n    >\r\n      <el-form\r\n        :label-position=\"labelPosition\"\r\n        :label-width=\"labelWidth\"\r\n        :inline=\"true\"\r\n        :model=\"tableDataRow\"\r\n        class=\"demo-form-inline\"\r\n        ref=\"tableDataRow\"\r\n      >\r\n        <el-form-item\r\n          label=\"父类机构\"\r\n          prop=\"parentId\"\r\n          :rules=\"{\r\n            required: true,\r\n            message: '请选择父类机构',\r\n          }\"\r\n        >\r\n          <!-- 选择框自定义模板 -->\r\n          <el-select\r\n            v-model=\"tableDataRow.parentName\"\r\n            value-key=\"parentId\"\r\n            placeholder=\"请选择\"\r\n          >\r\n            <!-- el-option 属性没有的话会让tree没有数据，所以设置为零 -->\r\n            <el-option value=\"\" style=\"height: 0px\"> </el-option>\r\n            <el-tree\r\n              :data=\"tableData\"\r\n              :props=\"upMenuProps\"\r\n              @node-click=\"upMenuDataTreeClick($event, 'modify')\"\r\n            ></el-tree>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item\r\n          label=\"机构名称\"\r\n          prop=\"name\"\r\n          :rules=\"{ required: true, message: '机构名称不能为空' }\"\r\n        >\r\n          <el-input v-model=\"tableDataRow.name\" clearable></el-input>\r\n        </el-form-item>\r\n        <el-form-item\r\n          label=\"机构类型\"\r\n          prop=\"type\"\r\n          :rules=\"{\r\n            required: true,\r\n            message: '请选择机构类型',\r\n            trigger: 'change',\r\n          }\"\r\n        >\r\n          <el-select v-model=\"tableDataRow.type\" placeholder=\"请选择\">\r\n            <el-option key=\"1\" label=\"公司\" value=\"1\"> </el-option>\r\n            <el-option key=\"2\" label=\"部门\" value=\"2\"> </el-option>\r\n            <el-option key=\"3\" label=\"小组\" value=\"3\"> </el-option>\r\n            <el-option key=\"4\" label=\"其它\" value=\"4\"> </el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"机构编码\">\r\n          <el-input v-model=\"tableDataRow.code\" disabled></el-input>\r\n        </el-form-item>\r\n        <el-form-item\r\n          label=\"排序\"\r\n          prop=\"sort\"\r\n          :rules=\"{ required: true, message: '排序不能为空' }\"\r\n        >\r\n          <el-input\r\n            v-model=\"tableDataRow.sort\"\r\n            type=\"number\"\r\n            clearable\r\n          ></el-input>\r\n        </el-form-item>\r\n        <el-form-item\r\n          label=\"电话\"\r\n          prop=\"phone\"\r\n          :rules=\"[{ min: 11, max: 11, message: '长度在11个字符' }]\"\r\n        >\r\n          <el-input v-model=\"tableDataRow.phone\" clearable></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"传真\">\r\n          <el-input v-model=\"tableDataRow.fax\" clearable></el-input>\r\n        </el-form-item>\r\n        <el-form-item\r\n          label=\"邮箱\"\r\n          prop=\"email\"\r\n          :rules=\"[\r\n            {\r\n              type: 'email',\r\n              message: '请输入正确的邮箱地址',\r\n              trigger: ['blur', 'change'],\r\n            },\r\n          ]\"\r\n        >\r\n          <el-input v-model=\"tableDataRow.email\" clearable></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"地址\">\r\n          <el-input v-model=\"tableDataRow.address\" clearable></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"备注\">\r\n          <el-input v-model=\"tableDataRow.remarks\" clearable></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button\r\n          @click=\"\r\n            formModifyVisible = false;\r\n            formGetClick();\r\n          \"\r\n          >取 消</el-button\r\n        >\r\n        <el-button type=\"primary\" @click=\"formModifyDetermine\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport apis from \"@/apis/apis\";\r\nexport default {\r\n  name: \"organManagement\",\r\n  data() {\r\n    return {\r\n      tableData: [], // 表格主体数据\r\n      tableDataRow: {}, // 当前选中的单行数据\r\n      formSeeVisible: false, // 查看机构弹出框的布尔值\r\n      formModifyVisible: false, // 编辑角色弹出框的布尔值\r\n      labelPosition: \"right\", //lable对齐方式\r\n      labelWidth: \"80px\", //lable宽度\r\n      // 新增数据\r\n      formAddData: {\r\n        parentId: \"\",\r\n        name: \"\",\r\n        type: \"\",\r\n        sort: \"\",\r\n        phone: \"\",\r\n        code: \"\",\r\n        fax: \"\",\r\n        email: \"\",\r\n        address: \"\",\r\n        remarks: \"\",\r\n        parentName: \"\",\r\n      },\r\n      // 父级机构的组织树配置\r\n      upMenuProps: {\r\n        label: \"name\", // 指定节点标签为节点对象的某个属性值\r\n        children: \"children\", // 指定子树为节点对象的某个属性值\r\n      },\r\n      fromAddVisible: false, // 新增机构弹出框的布尔值\r\n    };\r\n  },\r\n  // 初始化数据\r\n  mounted() {\r\n    this.formGetClick();\r\n  },\r\n  computed: {\r\n    buttonList() {\r\n      return this.$store._modules.root.context.state.button.buttonList;\r\n    },\r\n  },\r\n  methods: {\r\n    // 获取所有表格数据\r\n    async formGetClick() {\r\n      const res = await apis.adminApi.getUpmsOrganTree();\r\n      console.log(res);\r\n      if (res.data.code == 0) {\r\n        this.tableData = res.data.data;\r\n      } else {\r\n        this.$message.error(res.data.msg);\r\n      }\r\n    },\r\n    // 刷新表格数据\r\n    refresh() {\r\n      this.tableData = [];\r\n      this.formGetClick();\r\n    },\r\n    // 点击查看某条租户\r\n    formSeeClick(row) {\r\n      console.log(row);\r\n      this.tableDataRow = row;\r\n      this.parentIdToName();\r\n      this.formSeeVisible = true;\r\n    },\r\n    // 根据当前机构的父级id去查询对应的name\r\n    async parentIdToName() {\r\n      const res = await apis.adminApi.getUpmsOrganId(\r\n        this.tableDataRow.parentId\r\n      );\r\n      console.log(res);\r\n      // 如果查不出name值的话使用顶级\r\n      try {\r\n        this.$set(this.tableDataRow, \"parentName\", res.data.data.name);\r\n      } catch (e) {\r\n        this.$set(this.tableDataRow, \"parentName\", \"集团公司\");\r\n      }\r\n    },\r\n    // 点击机构新增按钮\r\n    formAddClick() {\r\n      this.fromAddVisible = true;\r\n    },\r\n    // 确认增加机构\r\n    async formAddDetermine() {\r\n      try {\r\n        await this.$refs.formAddData.validate();\r\n      } catch (err) {\r\n        return false;\r\n      }\r\n      const res = await apis.adminApi.postUpmsOrgan(this.formAddData);\r\n      this.fromAddVisible = false;\r\n      if (res.data.code == 0) {\r\n        this.$message.success(\"增加机构成功\");\r\n        this.refresh();\r\n      } else {\r\n        this.$message.error(res.data.msg);\r\n      }\r\n    },\r\n    // 新增机构弹框的上级机构被点击时的回调 || 编辑机构弹框的上级机构被点击时的回调\r\n    upMenuDataTreeClick(row, e) {\r\n      console.log(row, e);\r\n      if (e == \"add\") {\r\n        this.formAddData.parentName = row.name; // 把当前机构的name给下级机构的父parentName\r\n        this.formAddData.parentId = row.id; // 把当前机构的id给下级机构的父id\r\n      } else {\r\n        this.tableDataRow.parentName = row.name; // 把当前机构的name给下级机构的父parentName\r\n        this.tableDataRow.parentId = row.id; // 把当前机构的id给下级机构的父id\r\n      }\r\n    },\r\n    // 点击编辑某条机构\r\n    formModifyClick(row) {\r\n      console.log(row);\r\n      this.tableDataRow = JSON.parse(JSON.stringify(row));\r\n      this.parentIdToName();\r\n      this.formModifyVisible = true;\r\n    },\r\n    // 点击编辑某条机构后确定\r\n    async formModifyDetermine() {\r\n      try {\r\n        await this.$refs.tableDataRow.validate();\r\n      } catch (err) {\r\n        return false;\r\n      }\r\n      this.formModifyVisible = false;\r\n      const res = await apis.adminApi.putUpmsOrgan(this.tableDataRow);\r\n      console.log(res);\r\n      if (res.data.code == 0) {\r\n        this.$message.success(\"编辑租户成功\");\r\n        this.refresh();\r\n      } else {\r\n        this.$message.error(res.data.msg);\r\n      }\r\n    },\r\n    // 点击删除某条租户\r\n    async formDeleteClick(row) {\r\n      try {\r\n        const res = await this.$confirm(\r\n          \"此操作将永久删除此租户, 是否继续?\",\r\n          \"提示\",\r\n          {\r\n            confirmButtonText: \"确定\",\r\n            cancelButtonText: \"取消\",\r\n            type: \"warning\",\r\n          }\r\n        );\r\n        this.tableDataRow = row;\r\n        this.formDeleteDetermine();\r\n      } catch (err) {\r\n        console.log(err);\r\n      }\r\n    },\r\n    // 确定删除某条租户\r\n    async formDeleteDetermine() {\r\n      const res = await apis.adminApi.deleteUpmsOrganId(this.tableDataRow.id);\r\n      console.log(res);\r\n      if (res.data.code == 0) {\r\n        this.$message.success(\"删除租户成功\");\r\n        this.refresh();\r\n      } else {\r\n        this.$message.error(res.data.msg);\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n</style>"]}]}